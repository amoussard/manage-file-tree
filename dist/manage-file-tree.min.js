function Node(a){this.value="./",void 0!==a&&(this.value=a),this.path=void 0,this.extension=void 0,this.type=void 0,this.sons=[]}function Tree(a){this.root=new Node(a),this.attributes={}}function Visitor(){}function FindVisitor(a){this.results=[],this.filters=a}function UpdateVisitor(a){this.path=[],this.origin=a,this.computePath=function(a){var b="";return this.origin&&(b+=this.origin+"/"),this.path.length&&(b+=this.path.join("/")+"/"),b+=a.getValue()},this.computeExtension=function(a){if(!a.isLeaf())return!1;var b=a.getValue().split(".");return b.length<2?"":b.pop()},this.computeType=function(a){var b;switch(a.getExtension()){case!1:b="directory";break;case"mustache":b="mustache";break;default:b="file"}return b}}Node.prototype.getValue=function(){return this.value},Node.prototype.getPath=function(){return this.path},Node.prototype.setPath=function(a){this.path=a},Node.prototype.getExtension=function(){return this.extension},Node.prototype.setExtension=function(a){this.extension=a},Node.prototype.getType=function(){return this.type},Node.prototype.setType=function(a){this.type=a},Node.prototype.getSons=function(){return this.sons},Node.prototype.add=function(a){if(0!==a.length){var b=a.shift(),c=this.getSon(b);c?c.add(a):(c=new Node(b),this.sons.push(c),c.add(a))}},Node.prototype.getSon=function(a){for(var b in this.sons)if(this.sons[b].getValue()==a)return this.sons[b];return!1},Node.prototype.isLeaf=function(){return 0===this.sons.length},Node.prototype.accept=function(a,b){var c;if(b)for(c in this.sons)this.sons[c].accept(a);else{if(a.begin(this),!this.isLeaf()){a.visitBeforeSons(this);for(c in this.sons)this.sons[c].accept(a);a.visitAfterSons(this)}a.end(this)}},Tree.prototype.getRoot=function(){return this.root},Tree.prototype.add=function(a){var b=a.split("/");this.root.add(b)},Tree.prototype.accept=function(a){this.root.accept(a,!0)},Visitor.prototype.visitBeforeSons=function(){},Visitor.prototype.visitAfterSons=function(){},Visitor.prototype.begin=function(){},Visitor.prototype.end=function(){},FindVisitor.prototype.getResults=function(){return this.results},FindVisitor.prototype.visitBeforeSons=function(){},FindVisitor.prototype.visitAfterSons=function(){},FindVisitor.prototype.begin=function(a){var b=!0;for(var c in this.filters){var d=this.filters[c];switch(d.name){case"extension":a.getExtension()!==d.value&&(b=!1);break;case"type":a.getType()!==d.value&&(b=!1)}}b&&this.results.push(a.getPath())},FindVisitor.prototype.end=function(){},UpdateVisitor.prototype=new Visitor,UpdateVisitor.prototype.visitBeforeSons=function(a){this.path.push(a.getValue())},UpdateVisitor.prototype.visitAfterSons=function(){this.path.pop()},UpdateVisitor.prototype.begin=function(a){a.setPath(this.computePath(a)),a.setExtension(this.computeExtension(a)),a.setType(this.computeType(a))},UpdateVisitor.prototype.end=function(){};var FileTree=function(){new UpdateVisitor;return{init:this.init,setTree:this.setTree,acceptVisitor:this.acceptVisitor}}();